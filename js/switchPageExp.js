const generatedDiv = {
    iut: {
        background: {
            name: "sup.png",
            color: "rgb(0 39 255 / 31%)"
        },
        title: {
            name: "L'IUT : Le mélange entre développement et vie étudiante",
            color: "#fff12f"
        },
        content: [
            {
                title: "",
                content: "Durant mon BUT Informatique, j’ai eu l’occasion de réaliser de nombreux travaux pratiques en groupe. Ces projets nous ont permis de confronter nos idées, d’apprendre à organiser notre travail et de collaborer efficacement pour atteindre nos objectifs. Chaque membre apportait ses compétences et sa vision, ce qui nous a appris à gérer la communication, la répartition des tâches et l’entraide. Ce travail collectif nous préparait aux exigences du monde professionnel, où la réussite d’un projet dépend souvent de la cohésion et de la complémentarité des membres de l’équipe.",
            },
            {
                title: "",
                content: "L’un des aspects les plus enrichissants de mon parcours a été l’entraide entre étudiants. Expliquer un problème à quelqu’un permet non seulement de l’aider à avancer, mais aussi d’affiner sa propre compréhension. En déboguant les erreurs des autres, on apprend à mieux structurer sa pensée et à adopter des méthodologies efficaces pour identifier et résoudre les problèmes. Cette pratique m’a permis de progresser dans l’art du débogage, d’améliorer ma logique et de développer un esprit critique face aux bugs et aux imprévus.",
            },
            {
                title: "",
                content: "Au fil de ma formation, j’ai participé à divers projets allant du développement d’applications web à la gestion de bases de données et la programmation embarquée. Chaque projet nous a enseigné l’importance de la gestion de projet, des méthodes agiles et de la communication au sein d’une équipe. Ces expériences m’ont permis de comprendre comment coordonner le travail de plusieurs développeurs, utiliser des outils collaboratifs et livrer un produit fonctionnel en respectant les délais et les exigences.",
            }
        ],
        description: [
            {
                title: "1 - La vie étudiante",
                content: "La vie étudiante, c’est une période rythmée par les études, mais aussi par de nombreuses rencontres et expériences. C’est le temps des amitiés fortes, construites autour de soirées improvisées, ou de longues discussions après les cours. Les fêtes étudiantes offrent des moments de lâcher-prise essentiels entre les révisions et les examens. Les balades en ville, les après-midis passés dans un parc deviennent des habitudes, permettant de souffler et de créer des souvenirs. Entre autonomie, responsabilités et liberté, la vie étudiante est une étape unique où l’on apprend beaucoup sur soi."
            },
            {
                title: "2 - L'IUT",
                content: "La vie à l’IUT, c’est un mélange entre exigence académique et esprit de promotion. Avec des cours en petits groupes et beaucoup de travaux pratiques, on apprend vite à travailler en équipe et à gérer des projets concrets. Entre les cours, les pauses-café et les révisions collectives, on partage autant les réussites que les galères. Les semaines sont bien remplies avec des cours, des TP et des projets. L’IUT, c’est une expérience intense où l’on acquiert non seulement des compétences, mais aussi une vraie cohésion avec sa promo."
            },
        ],
        location: "IUT: Reims - URCA",
        imgTitle: "iut-nobg.png"
    },
    lycee: {
        background: {
            name: "lycee.png",
            color: "rgb(0 209 255 / 31%)"
        },
        title: {
            name: "Le Lycée : Le début des choses sérieuses",
            color: "orangered"
        },
        content: [
            {
                title: "",
                content: "La seconde marque un grand changement par rapport au collège. C'est l'entrée au lycée, avec un nouvel environnement souvent plus vaste et plus exigeant. Pour certains, c'est aussi la découverte de l'internat, un dortoir où ils doivent apprendre à vivre en communauté, à gérer leur autonomie et leur emploi du temps différemment. Les cours deviennent plus spécialisés et approfondis, avec de nouvelles matières comme les sciences économiques et sociales ou les options spécifiques. L'organisation du travail change également, demandant plus de rigueur et d'autonomie. C'est une année de transition qui prépare aux choix d’orientation pour la suite du lycée.",
            },
            {
                title: "",
                content: "La première est une année charnière où les choix commencent à prendre de l'importance pour l'avenir. Avec la fin du tronc commun généralisé, chacun suit des spécialités qui orientent progressivement son parcours. J’ai choisi NSI pour découvrir le monde de l’informatique, au départ sans trop d’ambition. C'était une matière nouvelle, une exploration sans certitude, mais qui m'a permis de mieux comprendre ce domaine. En parallèle, le rythme s'intensifie, les attentes des professeurs augmentent, et l'idée du baccalauréat se fait plus concrète. C’est une année où l’on commence à se projeter vers l’après-lycée, parfois sans encore savoir exactement où l’on veut aller.",
            },
            {
                title: "",
                content: "La terminale est l’année de la concrétisation des choix faits en première. J’ai décidé de garder NSI, car cette spécialité m’avait convaincu : l’informatique était devenue bien plus qu’une simple découverte, c’était une véritable orientation. Le rythme s’est encore intensifié avec les épreuves du baccalauréat et la préparation aux études supérieures. Entre la pression des examens et Parcoursup, c’est une année exigeante, mais aussi déterminante. Au final, tous ces efforts ont payé : j’ai obtenu mon bac avec mention Très Bien, confirmant mon engagement et ma motivation pour la suite de mon parcours.",
            }
        ],
        description: [
            {
                title: "1 - L'Avant Lycée",
                content: "Le collège prépare les élèves à un rythme d’apprentissage structuré et à leurs premiers examens. Il marque également un tournant décisif, en introduisant les premiers choix d’orientation vers le lycée, qu’il soit général, technologique ou professionnel."
            },
            {
                title: "2 - Le Lycée",
                content: "La scolarité est un parcours jalonné d’étapes décisives, où chaque année apporte son lot de découvertes, de choix et de défis. Du collège au lycée, puis vers l’enseignement supérieur, chaque transition forge peu à peu notre orientation et notre avenir. Le lycée lui forge à des examens plus intenses et aux attentes grandissantes."
            },
        ],
        location: "Lycée: Pierre Méchain - Laon - 02000",
        imgTitle: "mechain-nobg.png"
    },
    cerfrance: {
        background: {
            name: "stage.png",
            color: "rgb(145 135 255 / 31%)"
        },
        title: {
            name: "Cerfrance: La découverte du monde du travail",
            color: "#ff9100"
        },
        content: [
            {
                title: "Le feed des nouveautés",
                content: "Dans le cadre de ce stage, ma première mission résidée en la mise en place d’un feed de nouveautés destiné à informer les utilisateurs des avancées de l’équipe de développement. Le projet a débuté par une analyse des besoins, suivie de la conception des maquettes sur Penpot pour proposer une interface claire et intuitive. Après une réunion de validation avec l'équipe, nous avons élaboré un Modèle Conceptuel de Données (MCD) afin de structurer les informations à stocker. La réalisation a ensuite été menée sur Symfony, avec une gestion rigoureuse des versions via Git, où chaque fonctionnalité était développée sur une branche dédiée avant d’être fusionnée après validation. Enfin, des tests approfondis ont été réalisés pour garantir la fiabilité du feed avant sa mise en production. Ce projet m’a permis de renforcer mes compétences en conception, développement et collaboration en environnement Agile.",
            },
            {
                title: "Demandes RH",
                content: "J’ai aussi eu la chance de contribuer à la refonte d’un site de gestion des demandes RH, initialement développé sur une ancienne version de PHP et Symfony. L’application souffrait de lenteurs et d’un manque d’optimisation, tout en nécessitant l’ajout de nouvelles fonctionnalités pour une meilleure gestion des demandes.\n" +
                    "            <br />\n" +
                    "            Le projet a débuté par une réunion avec les différentes parties prenantes (DRH, DDT, DT, service paie, service recrutement) afin d’établir un cahier des charges détaillé. Nous avons ensuite conçu les maquettes, qui ont été validées avant d’entamer le développement.\n" +
                    "            <br />\n" +
                    "            La réalisation du site sous Symfony s’est articulée autour de plusieurs améliorations :\n" +
                    "            <ul>\n" +
                    "                <li>Refonte de l’interface pour une meilleure ergonomie et gestion de droits.</li>\n" +
                    "                <li>Optimisation des requêtes pour une meilleure fluidité et une possibilité d'exportation</li>\n" +
                    "                <li>Mise en place de nouveaux circuits de validation et de contraintes spécifiques selon chaque type de demande.</li>\n" +
                    "            </ul>\n" +
                    "            Cette refonte m’a permis de développer mes compétences en optimisation de code, gestion des droits utilisateurs et amélioration des performances applicatives. Il m'a aussi permis d'expérimenter le recueil de besoin utilisateur et sa validation continue",
            },
        ],
        description: [
            {
                title: "Contexte",
                content: "Dans le cadre de l'IUT de Reims, les étudiants doivent effectuer deux périodes de stage en entreprise. La première commence le 8 avril de la deuxième année et dure entre 8 et 12 semaines. Pour ma part, j'ai réalisé ce stage de 12 semaines au sein de l'entreprise CERFRANCE CNEIDF à Laon, en tant que développeur web fullstack sur Symfony, en suivant la méthodologie Agile Scrum."
            },
        ],
        location: "Entreprise: CERFRANCE CNEIDF - Laon",
        imgTitle: "cerfrance-nobg.png"
    },
    esgi: {
        background: {
            name: "master.png",
            color: "rgb(0 22 255 / 31%)"
        },
        title: {
            name: "L'ESGI : Un avenir prometteur",
            color: "#000000"
        },
        content: [
            {
                title: "",
                content: "Intégrer un mastère, c’est entrer dans une nouvelle phase d’apprentissage, où l’on approfondit ses connaissances tout en développant une vision plus stratégique et professionnelle. Au-delà des compétences techniques, ce cursus permet de maîtriser la gestion de projets, le travail en équipe et la prise de décision dans des environnements complexes. C’est aussi l’occasion de découvrir de nouvelles approches, d’échanger avec des professionnels du secteur et de se confronter à des problématiques concrètes à travers des cas pratiques ou des stages. L’environnement du mastère favorise l’autonomie, l’innovation et la montée en compétences, ouvrant ainsi la voie à des opportunités professionnelles ambitieuses et à une meilleure compréhension du fonctionnement du monde de l’entreprise.",
            },
            {
                title: "",
                content: "Intégrer une formation basée sur l’intervention de professionnels et des projets concrets, c’est apprendre au plus près de la réalité du métier. Les intervenants, issus du monde de l’entreprise, partagent leur expérience et apportent une vision pragmatique, en phase avec les évolutions du secteur. Cette approche permet non seulement d’acquérir des compétences techniques pointues, mais aussi de comprendre les enjeux et les attentes du marché du travail. Travailler sur des projets concrets, souvent en équipe, favorise l’autonomie, la gestion du temps et la prise de décision, des compétences essentielles en entreprise. Cette méthode d’apprentissage immersive prépare efficacement à l’insertion professionnelle en rendant l’étudiant acteur de sa formation et en lui permettant de développer un réseau dès ses études.",
            },
        ],
        description: [
            {
                title: "1 - La poursuite de l'IUT",
                content: "L’intégration en école pour un mastère après l’IUT est une nouvelle étape, mêlant continuité et changement. On retrouve les bases méthodologiques acquises en BUT, mais avec un approfondissement plus poussé et une exigence accrue. L’arrivée dans une nouvelle structure demande une adaptation, que ce soit au niveau du rythme, des attentes ou du nouvel environnement."
            },
            {
                title: "2 - Mastère",
                content: "Obtenir un mastère avec un titre RNCP de niveau 7 représente une véritable plus-value sur le marché du travail. Ce diplôme atteste d’une expertise approfondie dans un domaine spécifique et d’une capacité à gérer des projets complexes avec une vision stratégique. Il ouvre l’accès à des postes à responsabilités et permet une meilleure reconnaissance des compétences par les employeurs. En plus des connaissances techniques, le mastère développe des compétences en gestion, leadership et prise de décision, essentielles pour évoluer vers des rôles de cadre ou de manager. C’est également un atout pour une évolution rapide en entreprise ou pour se démarquer dans un secteur concurrentiel."
            },
        ],
        location: "École: ESGI - Reims",
        imgTitle: "esgi-nobg.png"
    },
    mahoudeaux: {
        background: {
            name: "boulangerie.png",
            color: "rgb(165 179 73 / 31%)"
        },
        title: {
            name: "Entreprise: Atelier Mahoudeaux",
            color: "#00ffe5"
        },
        content: [
            {
                title: "Manutentionnaire",
                content: "Le manutentionnaire en boulangerie joue un rôle clé dans la gestion des stocks et\n" +
                    "            l'approvisionnement des produits tout en respectant des contraintes strictes. Il doit faire preuve de\n" +
                    "            rapidité et d'organisation pour éviter que les produits surgelés ne commencent à décongeler avant leur mise\n" +
                    "            en rayon ou en cuisson. Son travail implique de fréquents allers-retours entre les chambres froides pouvant\n" +
                    "            descendre jusqu'à -20°C et les espaces de vente ou de production, ce qui exige une bonne résistance aux\n" +
                    "            variations de température. La manipulation des pâtisseries et viennoiseries demande également une grande\n" +
                    "            délicatesse afin d'éviter de les abîmer, car leur apparence est essentielle à leur attractivité. Entre\n" +
                    "            manutention intensive et respect des normes d'hygiène, ce métier requiert à la fois endurance, précision et\n" +
                    "            efficacité.",
            },
            {
                title: "Aide aux touriers",
                content: "L’aide aux touriers en boulangerie exige rapidité et précision pour assurer un\n" +
                    "            flux constant en fin ou milieu de chaîne. Il faut travailler efficacement pour ne jamais ralentir les\n" +
                    "            machines, en manipulant les pâtons avec soin tout en maintenant un rythme soutenu. Entre cadence élevée et\n" +
                    "            rigueur, ce rôle est essentiel pour garantir une production fluide et sans interruption.",
            },
            {
                title: "Nettoyage",
                content: "Le nettoyage des lieux de travail et des machines en boulangerie est une tâche\n" +
                    "            essentielle pour garantir l’hygiène et la sécurité alimentaire. Il s’agit de débarrasser les surfaces de\n" +
                    "            farine, de pâte et de résidus de cuisson tout en respectant les protocoles sanitaires. Les machines doivent\n" +
                    "            être soigneusement nettoyées pour éviter toute accumulation qui pourrait altérer la qualité des produits ou\n" +
                    "            provoquer des pannes. Ce travail demande minutie et régularité, souvent en fin de service, afin que tout\n" +
                    "            soit prêt pour la production du lendemain.",
            }
        ],
        description: [
            {
                title: "Contexte",
                content: "Deux mois de vacances peuvent sembler longs, mais ils offrent aussi de précieuses opportunités. C'est\n" +
                    "                l'occasion idéale pour explorer le monde du travail, acquérir de l'expérience professionnelle et\n" +
                    "                commencer à épargner. Ce temps libre peut ainsi être mis à profit pour allier découverte, autonomie\n" +
                    "                financière et préparation à l'avenir."
            },
        ],
        location: "Entreprise: Atelier Mahoudeaux - Vervins",
        imgTitle: "mahoudeaux-nobg.png"
    },
    pierru: {
        background: {
            name: "alternance.png",
            color: "rgba(255, 255, 255, 0.60)"
        },
        title: {
            name: "Pierru Piscicultures: La découverte de l'alternance",
            color: "#319191"
        },
        content: [
            {
                title: "Optimisation et Analyse",
                content: "Un des axes majeurs de mon alternance est l’optimisation et l’analyse des performances de l’ERP. Certaines pages souffrent de temps de chargement trop longs et d’une lourdeur excessive, nécessitant un allègement du code et des requêtes pour améliorer l’expérience utilisateur. D’autres sections, plus complexes techniquement, contiennent des fichiers volumineux et difficiles à maintenir. Mon rôle est de factoriser le code, en le rendant plus lisible et réutilisable grâce à l’utilisation de classes et de fichiers inclus.\n" +
                    "\n" +
                    "En parallèle, j’améliore l’analyse des données en optimisant leur récupération et leur affichage. Je développe également de nouveaux outils analytiques, comme des histogrammes permettant de visualiser le temps de travail et l’évolution de la biomasse, afin d’offrir une meilleure prise de décision basée sur les données.",
            },
            {
                title: "Organisation",
                content: "Un autre aspect clé de mon alternance est l’organisation, à travers le développement et l’amélioration d’outils facilitant la gestion quotidienne de la pisciculture. J’ai ainsi travaillé sur des calendriers interactifs et des outils de suivi et d’historique, permettant une meilleure visibilité des événements passés et à venir.\n" +
                    "\n" +
                    "En complément, je développe des aides destinées aux éleveurs, notamment des recommandations sur le choix de la nourriture en fonction des besoins spécifiques des poissons, ainsi que des modèles de croissance théorique pour anticiper leur développement. Ces outils visent à structurer les opérations, améliorer l’anticipation des besoins et optimiser le suivi des élevages.",
            },
            {
                title: "Prévision",
                content: "Le dernier aspect central de mon alternance est la prévision, essentielle pour optimiser la gestion des stocks et des livraisons. Je développe un système de prévision dynamique, basé sur des commandes réelles modifiables, permettant d’affecter différents lots en fonction des besoins.\n" +
                    "\n" +
                    "            Ce système offre un suivi précis des transferts et des livraisons, tout en fournissant des informations essentielles sur chaque lot, telles que la couleur des poissons ou la croissance nécessaire avant expédition.\n" +
                    "\n" +
                    "Enfin, cet outil contribue également à une meilleure gestion des stocks, en anticipant les besoins et en évitant les pénuries, notamment pour les poissons de grande taille, dont la croissance est plus longue et nécessite une planification rigoureuse.",
            }
        ],
        description: [
            {
                title: "Contexte",
                content: "En troisième année de BUT Informatique, deux options s'offraient à moi : réaliser un stage de 14 semaines avec un projet factice ou opter pour l'alternance. J'ai fait le choix de l’alternance afin de travailler sur des projets concrets, directement utiles à l'entreprise. Ce format me permet également d’être plus immergé dans le monde professionnel, de découvrir de nouvelle méthode de travail et de nouvelles perspectives ainsi que d’acquérir des compétences applicables immédiatement. De plus, l’alternance me permet de passer plus de temps en entreprise qu’en cours, ce qui renforce mon expérience terrain et ma capacité à m’adapter aux exigences réelles du métier."
            },
            {
                title: "Pierru Piscicultures",
                content: "En alternance, je travaille au sein d’une pisciculture, où je participe au développement et à l’amélioration de leur ERP en PHP et JavaScript. Ce projet me permet de répondre à des besoins concrets, d’optimiser les processus métier et d’apporter des solutions adaptées aux spécificités du secteur. Grâce à cette expérience, je renforce mes compétences en développement web, en gestion de bases de données et en optimisation des performances applicatives, tout en m’adaptant aux exigences réelles d’une entreprise et aux cahiers des charges."
            },
        ],
        location: "Entreprise: Pierru Piscicultures - Rogny",
        imgTitle: "pierru-nobg.png"
    }
}

let side = "front"


function modifyOpacityBg(oldBg, newBg) {
    let oldOpacity = parseFloat(oldBg.style.opacity);
    let newOpacity = parseFloat(newBg.style.opacity);

    if (newOpacity < 1) {
        newOpacity += 0.15;
        oldOpacity -= 0.15;
        newBg.style.opacity = newOpacity.toString();
        oldBg.style.opacity = oldOpacity.toString();
        setTimeout(() => modifyOpacityBg(oldBg, newBg), 100);
    } else {
        oldBg.classList.add("hidden")
        newBg.classList.remove("hidden")
    }
}

function switchBackground(newPage) {
    const oldBg = document.querySelector(".background_accueil:not(.hidden)")
    const newBg = document.querySelector(".background_accueil.hidden")
    newBg.src = "../img/background/" + generatedDiv[newPage].background.name
    document.querySelector('title').innerHTML = newPage.toUpperCase() + " - Haas Benjamin"
    document.querySelector(".content_global").style.backgroundColor = generatedDiv[newPage].background.color
    modifyOpacityBg(oldBg, newBg)

}

function adaptTextDesc(newPage) {
    const titles = document.querySelectorAll(`.regles_content_group .title_group .` + side)
    const contents = document.querySelectorAll(`.regles_content_group .regles_content .` + side)
    for (let indexDesc = 0; indexDesc < titles.length; indexDesc++) {
        console.log(indexDesc, generatedDiv[newPage].description.length)
        if (generatedDiv[newPage].description.length <= indexDesc) {
            titles[indexDesc].querySelector('p').innerHTML = ""
            contents[indexDesc].querySelector('p').innerHTML = ""
            contents[indexDesc].parentNode.parentNode.parentNode.parentNode.style.display = "none"
        } else {
            titles[indexDesc].querySelector('p').innerHTML = generatedDiv[newPage].description[indexDesc].title
            contents[indexDesc].querySelector('p').innerHTML = generatedDiv[newPage].description[indexDesc].content
            contents[indexDesc].parentNode.parentNode.parentNode.parentNode.style.display = "block"

        }
    }
}

function animatebloc_description() {
    const getParams = new URLSearchParams(window.location.search)
    const newPage = getParams.get("exp")
    const bloc_description = document.querySelectorAll(".bloc_description");
    const endY = window.innerHeight - 60;
    side = side === "front" ? "back" : "front"
    switchBackground(newPage)
    adaptTextDesc(newPage)
    document.querySelectorAll(".flipCard").forEach(card => card.classList.toggle("flipped"));
    let indexDiv = 0
    bloc_description.forEach((bloc) => {
        const startY = bloc.offsetTop;

        // Faire tomber l'élément
        bloc.style.transition = "transform 1s ease-in-out";
        bloc.style.transform = `translateY(${endY - startY}px)`;

        setTimeout(() => {
            if (generatedDiv[newPage].content.length <= indexDiv) {
                bloc.innerHTML = ""
                bloc.style.display = "none"
            } else {
                if (generatedDiv[newPage].content[indexDiv].title !== "") {
                    bloc.innerHTML = `<div class="title_desc">${generatedDiv[newPage].content[indexDiv].title}</div>
                                    <div class="regles_content">
                                        ${generatedDiv[newPage].content[indexDiv].content}
                                    </div>`
                } else {
                    bloc.innerHTML =`<div class="regles_content">${generatedDiv[newPage].content[indexDiv].content}</div>`;
                }
                bloc.style.display = "block"

            }
            indexDiv++

            // Remonter l'élément après une courte pause
            setTimeout(() => {
                bloc.style.transform = "translateY(0)";
            }, 700);
        }, 1000);
    });
}

function loadPage() {
    generateNavBar()
    const navbar = document.querySelector(".navbar_exp");
    // Ajout de l'événement click
    navbar.querySelectorAll(".btnSwitch").forEach((btn) => {
        if (!btn.src.includes('home')) {
            btn.parentNode.addEventListener("click", (event) => {
                event.preventDefault();
                event.stopPropagation();
                const getParams = new URLSearchParams(window.location.search)
                getParams.set("exp", btn.value)
                history.replaceState(null, "", "?" + getParams.toString());
                loadPage()
            });
        }
    })
    const getParams = new URLSearchParams(window.location.search)
    const newPage = getParams.get("exp")
    const divTitle = document.querySelector(".title_sport")
    divTitle.innerHTML = generatedDiv[newPage].title.name
    divTitle.style.borderColor = generatedDiv[newPage].title.color
    divTitle.style.color = generatedDiv[newPage].title.color
    document.querySelector(".regles_title img").src = "../img/logo/" + generatedDiv[newPage].imgTitle
    document.querySelector(".infosMoi").innerHTML = generatedDiv[newPage].location
    animatebloc_description()
}

document.addEventListener("DOMContentLoaded", () => {
    loadPage()
})
